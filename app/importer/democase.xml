<?xml version="1.0" encoding="UTF-8"?>
<!--
AttributeDefintion types = richstring, text, notype, json, link, string, mxl, longtext, image, boolean, number, enumeration or date

One entit defintion can only belong to one casedefintnion, meaning a entityDefinition can be used only once
-->
<SACMDefinition>
    
    <!-- Case Data Defintion -->   
    <EntityDefinition id="CaseData" label="">
        <AttributeDefinition id="Owner" type="Link.User" label="Owner"/>
        <AttributeDefinition id="Lace" type="Link.EntityDefinition.Lace" label="Lace"/>
        <AttributeDefinition id="Barthel" type="Link.EntityDefinition.Barthel" label="Barthel"/>        
        <AttributeDefinition id="PhysicalActivityPrescription" type="Link.EntityDefinition.PhysicalActivityPrescription" label="PhysicalActivityPrescription"/>
    </EntityDefinition>

    <EntityDefinition id="Lace" label="Lace">
        <AttributeDefinition id="lace1" type="enumeration" multiplicity="maximalOne" label="Length of Stay (including day of admission and discharge)">
            <EnumerationOption value="1 day"/>
            <EnumerationOption value="2 days"/>
            <EnumerationOption value="3 days"/>
            <EnumerationOption value="4-6 days"/>
            <EnumerationOption value="7-13 days"/>
            <EnumerationOption value="14 or more days"/>
        </AttributeDefinition>        
        <AttributeDefinition id="lace2" type="boolean" multiplicity="maximalOne" label="Was the patient admitted to hospital via the emergency department?"/>
        <AttributeDefinition id="lace3" type="boolean" multiplicity="maximalOne" label="Conditions - Previous myocardial infarction"/>
        <AttributeDefinition id="lace4" type="boolean" multiplicity="maximalOne" label="Conditions - Cerebrovascular disease"/>
        <AttributeDefinition id="lace5" type="boolean" multiplicity="maximalOne" label="Conditions - Peripheral vascular disease"/>
        <AttributeDefinition id="lace6" type="boolean" multiplicity="maximalOne" label="Conditions - Diabetes without complications"/>
        <AttributeDefinition id="lace7" type="boolean" multiplicity="maximalOne" label="Conditions - Congestive heart failure"/>
        <AttributeDefinition id="lace8" type="boolean" multiplicity="maximalOne" label="Conditions - Diabetes with end organ damage"/>
        <AttributeDefinition id="lace9" type="boolean" multiplicity="maximalOne" label="Conditions – Chronic pulmonary disease"/>
        <AttributeDefinition id="lace10" type="boolean" multiplicity="maximalOne" label="Conditions – Mild liver or renal disease"/>
        <AttributeDefinition id="lace11" type="boolean" multiplicity="maximalOne" label="Conditions – Any tumor (including lymphoma or leukemia)"/>
        <AttributeDefinition id="lace12" type="boolean" multiplicity="maximalOne" label="Conditions - Dementia"/>
        <AttributeDefinition id="lace13" type="boolean" multiplicity="maximalOne" label="Conditions – Connective tissue disease"/>        
        <AttributeDefinition id="lace14" type="boolean" multiplicity="maximalOne" label="Conditions – AIDS"/>        
        <AttributeDefinition id="lace15" type="boolean" multiplicity="maximalOne" label="Conditions – Moderate or severe liver or renal disease"/>
        <AttributeDefinition id="lace16" type="boolean" multiplicity="maximalOne" label="Conditions – Metastatic solid tumor"/>
        <DerivedAttributeDefinition id="lace17" expression="true" label="Comorbidities"/>
        <AttributeDefinition id="lace18" type="enumeration" multiplicity="maximalOne" label="Emergency department visits (six months prior to admission)">
            <EnumerationOption value="0 visits"/>
            <EnumerationOption value="1 visit"/>
            <EnumerationOption value="2 visits"/>            
            <EnumerationOption value="3 visits"/>
            <EnumerationOption value="4 or more visits"/>
        </AttributeDefinition>  
        <DerivedAttributeDefinition id="lace19" expression="true" label="LACE Score Risk of Readmission"/>  
    </EntityDefinition>

    <EntityDefinition id="Barthel" label="Barthel">
       <AttributeDefinition id="barthel1" type="enumeration" multiplicity="maximalOne" label="FEEDING">
            <EnumerationOption value="unable"/>
            <EnumerationOption value="needs help cutting, spreading butter, etc., or requires modified diet"/>
            <EnumerationOption value="independent"/>
        </AttributeDefinition>        
        <AttributeDefinition id="barthel2" type="enumeration" multiplicity="maximalOne" label="BATHING">
            <EnumerationOption value="dependent"/>
            <EnumerationOption value="independent (or in shower)"/>
        </AttributeDefinition>   
        <AttributeDefinition id="barthel3" type="enumeration" multiplicity="maximalOne" label="GROOMING">
            <EnumerationOption value="needs to help with personal care"/>
            <EnumerationOption value="independent face/hair/teeth/shaving (implements provided)"/>
        </AttributeDefinition>   
        <AttributeDefinition id="barthel4" type="enumeration" multiplicity="maximalOne" label="DRESSING">
            <EnumerationOption value="dependent"/>
            <EnumerationOption value="needs help but can do about half unaided"/>
            <EnumerationOption value="independent (including buttons, zips, laces, etc.)"/>
        </AttributeDefinition>   
        <AttributeDefinition id="barthel5" type="enumeration" multiplicity="maximalOne" label="BOWELS">
            <EnumerationOption value="incontinent (or needs to be given enemas)"/>
            <EnumerationOption value="occasional accident"/>
            <EnumerationOption value="continent"/>
        </AttributeDefinition>   
        <AttributeDefinition id="barthel6" type="enumeration" multiplicity="maximalOne" label="BLADDER">
            <EnumerationOption value="incontinent, or catheterized and unable to manage alone"/>
            <EnumerationOption value="occasional accident"/>
            <EnumerationOption value="continent"/>
        </AttributeDefinition>   
        <AttributeDefinition id="barthel7" type="enumeration" multiplicity="maximalOne" label="TOILET USE">
            <EnumerationOption value="dependent"/>
            <EnumerationOption value="needs some help, but can do something alone"/>            
            <EnumerationOption value="independent (on and off, dressing, wiping)"/>
        </AttributeDefinition>   
        <AttributeDefinition id="barthel8" type="enumeration" multiplicity="maximalOne" label="TRANSFERS (BED TO CHAIR AND BACK)">
            <EnumerationOption value="unable, no sitting balance"/>
            <EnumerationOption value="major help (one or two people, physical), can sit"/>
            <EnumerationOption value="minor help (verbal or physical)"/>
            <EnumerationOption value="independent"/>
        </AttributeDefinition>   
        <AttributeDefinition id="barthel9" type="enumeration" multiplicity="maximalOne" label="MOBILITY (ON LEVEL SURFACES)">
            <EnumerationOption value="immobile or < 50 yards"/>
            <EnumerationOption value="wheelchair independent, including corners, > 50 yards"/>
            <EnumerationOption value="walks with help of one person (verbal or physical) > 50 yards"/>
            <EnumerationOption value="independent (but may use any aid; for example, stick) > 50 yards"/>
        </AttributeDefinition>   
        <AttributeDefinition id="barthel10" type="enumeration" multiplicity="maximalOne" label="STAIRS">
            <EnumerationOption value="unable"/>
            <EnumerationOption value="needs help (verbal, physical, carrying aid)"/>
            <EnumerationOption value="independent"/>
        </AttributeDefinition>   
        <DerivedAttributeDefinition id="barthel11" expression="true" label="Barthel Index"/>  
    </EntityDefinition>

    <EntityDefinition id="PhysicalActivityPrescription" label="Physical Activity Prescription">
       <AttributeDefinition id="phactp1" type="date" multiplicity="maximalOne" label="Start date"/>
       <AttributeDefinition id="phactp2" type="date" multiplicity="maximalOne" label="End date"/>       
       <AttributeDefinition id="phactp3" type="number" multiplicity="maximalOne" label="Number of steps daily"/>       
       <AttributeDefinition id="phactp4" type="number" multiplicity="maximalOne" label="Minutes of low level activity daily"/>       
       <AttributeDefinition id="phactp5" type="number" multiplicity="maximalOne" label="Minutes of medium level activity daily"/>       
       <AttributeDefinition id="phactp6" type="number" multiplicity="maximalOne" label="Minutes of high level activity daily"/>       
       <AttributeDefinition id="phactp7" type="number" multiplicity="maximalOne" label="Max minutes without activity allowed daily"/>                   
    </EntityDefinition>


    <!-- Case Definition -->
    <CaseDefinition id="Democase" label="Demo Case London" entityDefinitionId="CaseData">
  
        <StageDefinition id="CaseIdentification" label="Case Identification" isMandetory="false" isRepeatable="true">        
            <HumanTaskDefinition id="Lace" label="Lace" ownerPath="Owner" isMandetory="false" isRepeatable="false" entityDefinitionId="Lace" entityAttachPath="Lace">
                <TaskParamDefinition path="Lace.lace1" isReadOnly="false"/>
                <TaskParamDefinition path="Lace.lace2" isReadOnly="false"/>
                <TaskParamDefinition path="Lace.lace3" isReadOnly="false"/>
                <TaskParamDefinition path="Lace.lace4" isReadOnly="false"/>
                <TaskParamDefinition path="Lace.lace5" isReadOnly="false"/>
                <TaskParamDefinition path="Lace.lace6" isReadOnly="false"/>
                <TaskParamDefinition path="Lace.lace7" isReadOnly="false"/>
                <TaskParamDefinition path="Lace.lace8" isReadOnly="false"/>
                <TaskParamDefinition path="Lace.lace9" isReadOnly="false"/>
                <TaskParamDefinition path="Lace.lace10" isReadOnly="false"/>
                <TaskParamDefinition path="Lace.lace11" isReadOnly="false"/>
                <TaskParamDefinition path="Lace.lace12" isReadOnly="false"/>
                <TaskParamDefinition path="Lace.lace13" isReadOnly="false"/>
                <TaskParamDefinition path="Lace.lace14" isReadOnly="false"/>
                <TaskParamDefinition path="Lace.lace15" isReadOnly="false"/>
                <TaskParamDefinition path="Lace.lace16" isReadOnly="false"/>
                <TaskParamDefinition path="Lace.lace17" isReadOnly="true"/>                
                <TaskParamDefinition path="Lace.lace18" isReadOnly="false"/>                
                <TaskParamDefinition path="Lace.lace19" isReadOnly="true"/>
            </HumanTaskDefinition>
        </StageDefinition>
       
        <StageDefinition id="CaseEvaluation" label="Case Evaluation" isMandetory="false" isRepeatable="true">  
            <SentryDefinition>
                <precondition processDefinitionId="CaseIdentification"></precondition>
            </SentryDefinition>
            <HumanTaskDefinition id="Barthel" label="Barthel" ownerPath="Owner" isMandetory="false" isRepeatable="false" entityDefinitionId="Barthel" entityAttachPath="Barthel">
                <TaskParamDefinition path="Barthel.barthel1" isReadOnly="false"/>
                <TaskParamDefinition path="Barthel.barthel2" isReadOnly="false"/>
                <TaskParamDefinition path="Barthel.barthel3" isReadOnly="false"/>
                <TaskParamDefinition path="Barthel.barthel4" isReadOnly="false"/>
                <TaskParamDefinition path="Barthel.barthel5" isReadOnly="false"/>
                <TaskParamDefinition path="Barthel.barthel6" isReadOnly="false"/>
                <TaskParamDefinition path="Barthel.barthel7" isReadOnly="false"/>
            </HumanTaskDefinition>
        </StageDefinition>

        <StageDefinition id="WorkplanDefinition" label="Workplan Definition" isMandetory="false" isRepeatable="true">  
            <SentryDefinition>
                <precondition processDefinitionId="CaseEvaluation"></precondition>
            </SentryDefinition>
            <HumanTaskDefinition id="PhysicalActivityPrescription" label="Physical Activity Prescription" ownerPath="Owner" isMandetory="false" isRepeatable="false" entityDefinitionId="PhysicalActivityPrescription" entityAttachPath="PhysicalActivityPrescription">
                <TaskParamDefinition path="PhysicalActivityPrescription.phactp1" isReadOnly="false"/>
                <TaskParamDefinition path="PhysicalActivityPrescription.phactp2" isReadOnly="false"/>
                <TaskParamDefinition path="PhysicalActivityPrescription.phactp3" isReadOnly="false"/>
                <TaskParamDefinition path="PhysicalActivityPrescription.phactp4" isReadOnly="false"/>
                <TaskParamDefinition path="PhysicalActivityPrescription.phactp5" isReadOnly="false"/>
                <TaskParamDefinition path="PhysicalActivityPrescription.phactp6" isReadOnly="false"/>
                <TaskParamDefinition path="PhysicalActivityPrescription.phactp7" isReadOnly="false"/>
            </HumanTaskDefinition>
        </StageDefinition>
        
    </CaseDefinition>

</SACMDefinition>
