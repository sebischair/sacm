<EntityDefinition id="ICS2_CaseData" description="Case Data">
    <AttributeDefinition id="ICS2_Patient" type="Link.Users.AssutaPatients" description="Patient"/>
    <AttributeDefinition id="ICS2_Owner" type="Link.Users.AssutaCaseManagers" description="Owner"/>
    <AttributeDefinition id="ICS2_Inclusion" type="Link.EntityDefinition.ICS2_Inclusion" description="ריוני הכללה"/>      
	<AttributeDefinition id="ICS2_ThecTest" type="Link.EntityDefinition.ICS2_ThecTest" description="טכנולוגיות"/>   
	<AttributeDefinition id="ICS2_PatientConsent" type="Link.EntityDefinition.ICS2_PatientConsent" description="זיהוי מטופל"/>   
	<AttributeDefinition id="ICS2_HADS" type="Link.EntityDefinition.ICS2_HADS" description="HADS"/>   
	
	<AttributeDefinition id="ICS2_Charlson" type="Link.EntityDefinition.ICS2_Charlson" description="HADS"/> 
	
</EntityDefinition>

<EntityDefinition id="ICS2_Inclusion" description="ריוני הכללה">
    <AttributeDefinition id="basicAge" type="number" multiplicity="maximalOne" description="Basic Age">
        <EnumerationOption value="0" description="לא"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition> 
    <AttributeDefinition id="basicResidantual" type="enumeration" multiplicity="maximalOne" description="Basic Residantual">
        <EnumerationOption value="0" description="לא"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition> 
    <AttributeDefinition id="basicOperation" type="enumeration" multiplicity="maximalOne" description="BasicOperation">
        <EnumerationOption value="0" description="לא"/> <!--TODO check this-->
        <EnumerationOption value="1" description="כן"/> <!--TODO check this-->
    </AttributeDefinition>
    <AttributeDefinition id="basicASA" type="enumeration" multiplicity="maximalOne" description="Basic ASA">
        <EnumerationOption value="1" description="1"/> 
        <EnumerationOption value="2" description="2"/> 
        <EnumerationOption value="3" description="3"/> 
        <EnumerationOption value="4" description="4"/> 
        <EnumerationOption value="5" description="5"/> 
    </AttributeDefinition> 
    <AttributeDefinition id="basicChronical" type="enumeration" multiplicity="maximalOne" description="Basic Chronical">
        <EnumerationOption value="0" description="לא"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition> 
    <AttributeDefinition id="basicLanguegue" type="enumeration" multiplicity="maximalOne" description="Basic Languegue">
        <EnumerationOption value="0" description="לא"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition> 
</EntityDefinition>

<EntityDefinition id="ICS2_ThecTest" description="טכנולוגיות">
    <AttributeDefinition id="techPassword" type="enumeration" multiplicity="maximalOne" description="האם יש למטופל או למטפל העיקרי סיסמה לאתר Maccabi Online?">
        <EnumerationOption value="0" description="לשניהם אין"/>
        <EnumerationOption value="3" description="למטפל העיקרי בלבד יש"/>
        <EnumerationOption value="2" description="למטופל בלבד יש"/>
        <EnumerationOption value="1" description="לשניהם יש"/>
    </AttributeDefinition> 
    <AttributeDefinition id="techAbility" type="enumeration" multiplicity="maximalOne" description="האם למטפל העיקרי/למטופל יש ידע בסיסי בשימוש באפליקציות?">
        <EnumerationOption value="0" description="לא"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition> 
    <AttributeDefinition id="techInternet" type="enumeration" multiplicity="maximalOne" description="האם בביתו של המטופל קיימת גישה לאינטרנט אלחוטי?">
        <EnumerationOption value="0" description="לא"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition> 
</EntityDefinition>

<EntityDefinition id="ICS2_PatientConsent" description="זיהוי מטופל">
    <AttributeDefinition id="isConsent" type="enumeration" multiplicity="maximalOne" description="המטופל נתן את הסכמתו להשתתפות במחקר?">
        <EnumerationOption value="0" description="לא"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition> 
    <AttributeDefinition id="consentDate" type="date" multiplicity="maximalOne" description="תאריך קבלת הסכמת המטופל">
        <EnumerationOption value="0" description="לא"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition> 
</EntityDefinition>

<!--TODO Check Patients data gos here-->


<EntityDefinition id="ICS2_HADS" description="HADS">
    <AttributeDefinition id="isConsent" type="enumeration" multiplicity="maximalOne" description="המטופל נתן את הסכמתו להשתתפות במחקר?">
        <EnumerationOption value="0" description=""/>
        <EnumerationOption value="1" description=""/>
    </AttributeDefinition> 
</EntityDefinition>


<EntityDefinition id="ICS2_Charlson" description="Charlson">
    <AttributeDefinition id="ch1" type="enumeration" multiplicity="maximalOne" description="Myocardial infarct">
        <EnumerationOption value="0" description="No"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition> 
    <AttributeDefinition id="ch2" type="enumeration" multiplicity="maximalOne" description="Congestive heart failure">
        <EnumerationOption value="0" description="No"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition>
    <AttributeDefinition id="ch3" type="enumeration" multiplicity="maximalOne" description="Peripheral vascular disease">
        <EnumerationOption value="0" description="No"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition>
    <AttributeDefinition id="ch4" type="enumeration" multiplicity="maximalOne" description="Cerebrovascular disease (except hemiplegia)">
        <EnumerationOption value="0" description="No"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition>
    <AttributeDefinition id="ch5" type="enumeration" multiplicity="maximalOne" description="Dementia">
        <EnumerationOption value="0" description="No"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition>
    <AttributeDefinition id="ch6" type="enumeration" multiplicity="maximalOne" description="Chronic pulmonary disease">
        <EnumerationOption value="0" description="No"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition>
    <AttributeDefinition id="ch7" type="enumeration" multiplicity="maximalOne" description="Connective tissue disease">
        <EnumerationOption value="0" description="No"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition>
    <AttributeDefinition id="ch8" type="enumeration" multiplicity="maximalOne" description="Ulcer disease">
        <EnumerationOption value="0" description="No"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition>
    <AttributeDefinition id="ch9" type="enumeration" multiplicity="maximalOne" description="Mild liver disease">
        <EnumerationOption value="0" description="No"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition>
    <AttributeDefinition id="ch10" type="enumeration" multiplicity="maximalOne" description="Diabetes (without complications)">
        <EnumerationOption value="0" description="No"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition>
    <AttributeDefinition id="ch11" type="enumeration" multiplicity="maximalOne" description="Diabetes with end organ damage">
        <EnumerationOption value="0" description="No"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition>
    <AttributeDefinition id="ch12" type="enumeration" multiplicity="maximalOne" description="Hemiplegia">
        <EnumerationOption value="0" description="No"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition>
    <AttributeDefinition id="ch13" type="enumeration" multiplicity="maximalOne" description="Moderate or severe renal disease">
        <EnumerationOption value="0" description="No"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition>
    <AttributeDefinition id="ch14" type="enumeration" multiplicity="maximalOne" description="Solid tumor (non metastatic)">
        <EnumerationOption value="0" description="No"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition>
    <AttributeDefinition id="ch15" type="enumeration" multiplicity="maximalOne" description="Leukemia">
        <EnumerationOption value="0" description="No"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition>
    <AttributeDefinition id="ch16" type="enumeration" multiplicity="maximalOne" description="Lymphoma, Multiple myeloma">
        <EnumerationOption value="0" description="No"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition>
    <AttributeDefinition id="ch17" type="enumeration" multiplicity="maximalOne" description="Moderate or severe liver disease">
        <EnumerationOption value="0" description="No"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition>
    <AttributeDefinition id="ch18" type="enumeration" multiplicity="maximalOne" description="Metastatic solid tumor">
        <EnumerationOption value="0" description="No"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition>
    <AttributeDefinition id="ch19" type="enumeration" multiplicity="maximalOne" description="AIDS">
        <EnumerationOption value="0" description="No"/>
        <EnumerationOption value="1" description="כן"/>
    </AttributeDefinition>
    <AttributeDefinition id="ch20" type="enumeration" multiplicity="maximalOne" description="Age">
        <EnumerationOption value="1" description="50-59"/>
        <EnumerationOption value="2" description="60-69"/>
        <EnumerationOption value="3" description="70-79"/>
        <EnumerationOption value="4" description="80-89"/>
        <EnumerationOption value="5" description="90-99"/>
    </AttributeDefinition>           
    <DerivedAttributeDefinition id="ch21" expression="number(ch1,0) + number(ch2,0) + number(ch3,0) + number(ch4,0) + number(ch5,0) + number(ch6,0) + number(ch7,0) + number(ch8,0) + number(ch9,0) + number(ch10,0) + number(ch11,0)*2 + number(ch12,0)*2 + number(ch13,0)*2 + number(ch14,0)*2 + number(ch15,0)*2 + number(ch16,0)*2 + number(ch17,0)*3 + number(ch18,0)*6 + number(ch19,0)*6 + number(ch20,0)" description="Charlson Comorbidity Index"/>     
</EntityDefinition>



<CaseDefinition id="ICS2" description="Israel CS2" ownerPath="ICS2_Owner" entityDefinitionId="ICS2_CaseData">

    <StageDefinition id="ICS2_CaseIdentification" description="זיהוי מטופל" isMandatory="true" isRepeatable="false">        
        <HumanTaskDefinition id="ICS2_SelectPatient" description="Select Patient" ownerPath="ICS2_Owner" isMandatory="true" isRepeatable="false">                
            <TaskParamDefinition path="ICS2_Patient" isReadOnly="false" isMandatory="true"/>
            <TaskParamDefinition path="ICS2_Owner" isReadOnly="false" isMandatory="true"/>
        </HumanTaskDefinition>
        <HumanTaskDefinition id="ICS2_Inclusion" description="Inclusion" ownerPath="ICS2_Owner" isMandatory="true" isRepeatable="false" entityDefinitionId="ICS2_Inclusion" entityAttachPath="ICS2_Inclusion">
			<SentryDefinition>
                <precondition processDefinitionId="ICS2_SelectPatient"/>
            </SentryDefinition>
            <TaskParamDefinition path="ICS2_Inclusion.basicAge" isReadOnly="false" isMandatory="true"/>
            <TaskParamDefinition path="ICS2_Inclusion.basicResidantual" isReadOnly="false" isMandatory="true"/>
			<TaskParamDefinition path="ICS2_Inclusion.basicOperation" isReadOnly="false" isMandatory="true"/>
			<TaskParamDefinition path="ICS2_Inclusion.basicASA" isReadOnly="false" isMandatory="true"/>
			<TaskParamDefinition path="ICS2_Inclusion.basicChronical" isReadOnly="false" isMandatory="true"/>
			<TaskParamDefinition path="ICS2_Inclusion.basicLanguegue" isReadOnly="false" isMandatory="true"/>
        </HumanTaskDefinition>
		<HumanTaskDefinition id="ICS2_ThecTest" description="Thec Test" ownerPath="ICS2_Owner" isMandatory="true" isRepeatable="false" entityDefinitionId="ICS2_ThecTest" entityAttachPath="ICS2_ThecTest">
			<SentryDefinition>
                <precondition processDefinitionId="ICS2_SelectPatient"/>
            </SentryDefinition>
            <TaskParamDefinition path="ICS2_Inclusion.techPassword" isReadOnly="false" isMandatory="true"/>
            <TaskParamDefinition path="ICS2_Inclusion.techAbility" isReadOnly="false" isMandatory="true"/>
			<TaskParamDefinition path="ICS2_Inclusion.techInternet" isReadOnly="false" isMandatory="true"/>
        </HumanTaskDefinition>
		<HumanTaskDefinition id="ICS2_PatientConsent" description="Patient Consent" ownerPath="ICS2_Owner" isMandatory="true" isRepeatable="false" entityDefinitionId="ICS2_PatientConsent" entityAttachPath="ICS2_PatientConsent">
			<SentryDefinition>
                <precondition processDefinitionId="ICS2_SelectPatient"/>
            </SentryDefinition>
            <TaskParamDefinition path="ICS2_PatientConsent.isConsent" isReadOnly="false" isMandatory="true"/>
            <TaskParamDefinition path="ICS2_PatientConsent.consentDate" isReadOnly="false" isMandatory="true"/>
        </HumanTaskDefinition>
    </StageDefinition>
    <StageDefinition id="ICS2_CaseEvaluation" description="Case Evaluation" isMandatory="true" isRepeatable="true">  
        <SentryDefinition>
            <precondition processDefinitionId="ICS2_CaseIdentification"/>
        </SentryDefinition>             
    </StageDefinition>
	
</CaseDefinition>