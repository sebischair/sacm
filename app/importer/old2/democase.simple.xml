<?xml version="1.0" encoding="UTF-8"?>
<!--
AttributeDefintion types = richstring, text, notype, json, link, string, mxl, longtext, image, boolean, number, enumeration or date

One entit defintion can only belong to one casedefintnion, meaning a entityDefinition can be used only once
-->
<SACMDefinition>
    
    <UserDefinition>
        <AttributeDefinition id="patientnr" type="string" multiplicity="maximalOne" description="Patient number"/>
    </UserDefinition>
    
    <!--Barcelona Groups and Users-->
    <Group id="Barcelona-Hospital" description="All users of the hospital in Barcelona">
        <Administrator principalId="Me"/>
        <Membership principalId="Barcelona-Doctors"/>
        <Membership principalId="Barcelona-Patients"/>
    </Group>

    <Group id="Barcelona-Doctors" description="All doctors of the hospital in Barcelona">
        <Administrator principalId="Me"/>
        <Membership principalId="VincentAdams"/>
    </Group>

    <Group id="Barcelona-Patients" description="All doctors of the hospital in Barcelona">
        <Administrator principalId="Me"/>
        <Membership principalId="CherylWillis"/>
    </Group>

    <!--Usernames from https://uinames.com/
        https://uinames.com/api/?region=United%20States&amount=25&maxlen=25 -->
    <User id="JohnSmith" email="john.smith@connecare.eu">
    </User>
    <User id="CherylWillis" email="cheryl.willis@connecare.eu">
    </User>
    <User id="VincentAdams" email="vincent.adams@connecare.eu">
    </User>
       


    <!--Barcelona Worksapce-->
    <Workspace id="Barcelona Hospital" description="All model elements and instances of the hospital in Barcelona">
        <!--<Reader principalId="Barcelona-Hospital"/>-->
        <!--<Writer principalId="Barcelona-Hospital"/>-->
        <Contributor principalId="Assuta"/>
        <Administrator principalId="Me"/>

        <!-- Case Data Defintion -->   
        <EntityDefinition id="CaseData" description="">
            <AttributeDefinition id="Patient" type="Link.Users.Barcelona-Doctors" description="Patient"/>
            <AttributeDefinition id="Owner" type="Link.Users.Barcelona-Doctors" description="Owner"/>    
            <AttributeDefinition id="Text" type="string" description="Text"/> 
        </EntityDefinition>


        <!-- Case Definition -->
        <CaseDefinition id="Democase" description="Demo Case London" ownerPath="Owner" entityDefinitionId="CaseData">

            <StageDefinition id="CaseIdentification" description="Case Identification" isMandatory="true" isRepeatable="false">        
                <HumanTaskDefinition id="SelectPatient" description="Select Patient" ownerPath="Owner" isMandatory="true" isRepeatable="false"> 
                    <TaskParamDefinition path="Owner" isReadOnly="false" isMandatory="true"/>               
                    <!--<TaskParamDefinition path="Patient" isReadOnly="false" isMandatory="true"/>-->
                </HumanTaskDefinition>
                <AutomatedTaskDefinition id="Print" description="Print something" ownerPath="Owner" isMandatory="true" isRepeatable="false"> 
                    <TaskParamDefinition path="Text" isReadOnly="false" isMandatory="true"/>               
                    <!--<TaskParamDefinition path="Patient" isReadOnly="false" isMandatory="true"/>-->
                </AutomatedTaskDefinition>
            </StageDefinition>
        


            
        </CaseDefinition>
    
    </Workspace>

    <!--This executes the case for testing-->
    <Execution>        
        <Action id="CompleteHumanTask" processId="SelectPatient">
            <TaskParam path="Owner"  userValue="VincentAdams"/>
        </Action>
    </Execution>

</SACMDefinition>


