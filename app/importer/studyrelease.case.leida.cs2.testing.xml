<SACMDefinition>
    <Group staticId="2c9480885d1737ef015d74deec7f0002" id="IrbllProfessionals"/>
    <Group staticId="c137c88b923911e7bd0c0242ac120002" id="IrbllAdminOfficers"/>
    <Group staticId="c137c886923911e7bd0c0242ac120002" id="IrbllAnesthesiologists"/>
    <Group staticId="c137c87a923911e7bd0c0242ac120002" id="IrbllCaseManagers"/>
    <Group staticId="c137c870923911e7bd0c0242ac120002" id="IrbllClinicians"/>
    <Group staticId="c137c8b9923911e7bd0c0242ac120002" id="IrbllDataManagers"/>
    <Group staticId="c137c8b0923911e7bd0c0242ac120002" id="IrbllLabTechnicians"/>
    <Group staticId="c137c8b4923911e7bd0c0242ac120002" id="IrbllLocalPulmonologists"/>
    <Group staticId="c137c880923911e7bd0c0242ac120002" id="IrbllNurses"/>
    <Group staticId="c137c89d923911e7bd0c0242ac120002" id="IrbllNutritionists"/>
    <Group staticId="c137c88f923911e7bd0c0242ac120002" id="IrbllPhysicians"/>
    <Group staticId="c137c899923911e7bd0c0242ac120002" id="IrbllPhysiotherapists"/>
    <Group staticId="c137c8ab923911e7bd0c0242ac120002" id="IrbllPrimaryCareClinicians"/>
    <Group staticId="c137c8a1923911e7bd0c0242ac120002" id="IrbllPsychologists"/>
    <Group staticId="c137c894923911e7bd0c0242ac120002" id="IrbllRNSTs"/>
    <Group staticId="c137c8a6923911e7bd0c0242ac120002" id="IrbllSocialCareers"/>
    <Group staticId="c137c876923911e7bd0c0242ac120002" id="IrbllAdmins"/>
    <Group staticId="c137c821923911e7bd0c0242ac120002" id="IrbllPatients"/>

    <User staticId="2c940c085e765068015e7652be860010" id="castrot"/>
    <User staticId="2c940c085e765068015e765a27550020" id="foxn"/>
    <User staticId="2c940c085e765068015e76dcc55f00c0" id="davidsonj"/>
    <User staticId="2182a02ab7db11e784180242ac120009" id="noahs"/>
    <User staticId="2c940c085e765068015e76e40dec00d0" id="hartj"/>
    <User staticId="216b6004b7db11e784180242ac120009" id="werners"/>
    <User staticId="2c93808260f91e820161084c2f540025" id="drudisr"/>
    <User staticId="2c93808260f91e8201610849939d001e" id="bigordaa"/>
    <User staticId="21a6d881b7db11e784180242ac120009" id="kuhnl"/>

    <Workspace staticId="2c9480885d1737ef015d74deec7f0002" id="Irbll">
	
		<EntityDefinition id="LCS1__CaseData" description="Case Data">
		  <AttributeDefinition id="LCS1__Anesthesiologist" type="Link.Users(IrbllAnesthesiologists)" description="Anestesiòleg" multiplicity="maximalOne"/>            
		  <AttributeDefinition id="LCS1__Physiotherapist" type="Link.Users(IrbllPhysiotherapists)" description="Fisioterapeuta" multiplicity="maximalOne"/>            		
		  <AttributeDefinition id="LCS1__Patient" type="Link.Users(IrbllPatients)" description="Pacient" multiplicity="maximalOne"/>
		  <AttributeDefinition id="LCS1__CaseManager" type="Link.Users(IrbllProfessionals)" description="Gestor de casos" multiplicity="maximalOne"/>            
		  <AttributeDefinition id="LCS1__Clinician" type="Link.Users(IrbllClinicians)" description="Cirurgià" multiplicity="maximalOne"/> <!-- Metge -->
		  <AttributeDefinition id="LCS1__Nurse" type="Link.Users(IrbllNurses)" description="Infermera" multiplicity="maximalOne"/>
		  <AttributeDefinition id="LCS1__SocialCareer" type="Link.Users(IrbllSocialCareers)" description="Treballador social" multiplicity="maximalOne"/>
		  <AttributeDefinition id="LCS1__Owner" type="Link.Users(IrbllProfessionals)" description="Owner" multiplicity="maximalOne"/>
		  <AttributeDefinition id="LCS1__AnesClinic" type="Link.Users(IrbllAnesthesiologists, IrbllClinicians)" description="Anestesiòleg o Cirurgià" multiplicity="maximalOne"/>            		  		  
		  <AttributeDefinition id="LCS1__PrimaryCareClinicians" type="Link.Users(IrbllPrimaryCareClinicians)" description="Atenció Primària" multiplicity="maximalOne"/>

		  <AttributeDefinition id="LCS1__WorkplanDueDate" type="date.after(TODAY)" description="Workplan default due date"/>		  
		  <AttributeDefinition id="LCS1__Identification" type="Link.EntityDefinition.LCS1__Identification"/>  		 		
		  
		 <!--  		  
		  <AttributeDefinition id="LCS1__Evaluation" type="Link.EntityDefinition.LCS1__Evaluation"/> 		  		  		  		  
		  <AttributeDefinition id="LCS1__WorkplanBeforeHospitalization" type="Link.EntityDefinition.LCS1__WorkplanBeforeHospitalization"/> 					  
		  <AttributeDefinition id="LCS1__WorkplanDuringHospitalization" type="Link.EntityDefinition.LCS1__WorkplanDuringHospitalization"/> 								  
		  <AttributeDefinition id="LCS1__WorkplanAfterHospitalization" type="Link.EntityDefinition.LCS1__WorkplanAfterHospitalization"/> 								  
		  <AttributeDefinition id="LCS1__Discharge" type="Link.EntityDefinition.LCS1__Discharge"/> 
		  -->
						
		</EntityDefinition>		

        <EntityDefinition id="LCS1__Identification" description="Identification">
            <AttributeDefinition id="LCS1__TechnologicalTest" type="Link.EntityDefinition.LCS1__TechnologicalTest" multiplicity="maximalOne" description="Technological test"/> 
        </EntityDefinition>				

		<EntityDefinition id="LCS1__TechnologicalTest" >
			<AttributeDefinition id="tech1" type="enumeration" multiplicity="exactlyOne" description="Vosté o el seu cuidador tenen connexió a Internet?">
				<EnumerationOption value="0" description="No"/>
				<EnumerationOption value="1" description="Sí"/>
			</AttributeDefinition>

			<AttributeDefinition id="tech2" type="enumeration" multiplicity="exactlyOne" description="Vosté fa anar:">
				<EnumerationOption value="1" description="Telèfon mòvil no tan sols per trucar."/>
				<EnumerationOption value="0.0001" description="Tablet"/>
				<EnumerationOption value="0.0002" description="Ordinador personal."/>
				<EnumerationOption value="0" description="Cap"/>
			</AttributeDefinition>

			<AttributeDefinition id="tech3" type="enumeration" multiplicity="exactlyOne" description="El seu cuidador principal fa anar:">
				<EnumerationOption value="1" description="Telèfon mòvil no tan sols per trucar."/>
				<EnumerationOption value="0.0001" description="Tablet"/>
				<EnumerationOption value="0.0002" description="Ordinador personal."/>
				<EnumerationOption value="0" description="Cap"/>
			</AttributeDefinition>
			
			<DerivedAttributeDefinition id="tech4" expression="round(number(tech1,0))+round(number(tech2,0))+round(number(tech3,0))" description="Resultat del test tecnològic"/>
		</EntityDefinition>	  	

		<!--
        <EntityDefinition id="LCS1__Evaluation" description="Case evaluation">
		</EntityDefinition>
		  		
		<EntityDefinition id="LCS1__WorkplanBeforeHospitalization">
		</EntityDefinition>
		
		<EntityDefinition id="LCS1__WorkplanDuringHospitalization">
		</EntityDefinition>
		
		<EntityDefinition id="LCS1__WorkplanAfterHospitalization">				
		</EntityDefinition>

		<EntityDefinition id="LCS1__Discharge">
		</EntityDefinition>
		-->

   <!-- CASE DEFINITION -->				  
        <CaseDefinition id="LCS1__Leida" description="CS1 Lleida - Versió Eurecat" ownerPath="LCS1__Settings.CaseManager" clientPath="LCS1__Settings.Patient" entityDefinitionId="LCS1__CaseData" newEntityDefinitionId="LCS1__Settings" newEntityAttachPath="LCS1__Settings" >	  
				
	    <!-- STAGEDEFINITION: CaseIdentification -->	  
            <StageDefinition id="LCS1__CaseIdentification" description="Identificació del cas" isMandatory="true" repeatable="ONCE" entityDefinitionId="LCS1__Identification" entityAttachPath="LCS1__Identification">
		
                <HumanTaskDefinition id="LCS1__SelectPatient" externalId="SelectPatient" description="Inclusió" ownerPath="LCS1__Settings.CaseManager" isMandatory="true" repeatable="ONCE">
                    <HttpHookDefinition on="COMPLETE" url="http://integration-producer:8081/v1/producer/point-to-point/sacm/case/patient/inclusion" method="POST" failureMessage="Could not COMPLETE SelectPatient on Self-Management System!"/>
                    <TaskParamDefinition path="LCS1__Settings.Patient" isReadOnly="false" isMandatory="true"/>                
                    <TaskParamDefinition path="LCS1__Settings.CaseManager" isReadOnly="false" isMandatory="true"/> 
                    <TaskParamDefinition path="LCS1__Settings.Clinician" isReadOnly="false" isMandatory="true"/>
                    <TaskParamDefinition path="LCS1__Settings.Nurse" isReadOnly="false" isMandatory="true"/>                              
                    <TaskParamDefinition path="LCS1__Settings.SocialCareer" isReadOnly="false" isMandatory="true"/>            
                </HumanTaskDefinition>					
			</StageDefinition>
			
		<!-- 			
            <StageDefinition id="LCS1__CaseEvaluation" description="Avaluació del cas" isMandatory="true" repeatable="ONCE" entityDefinitionId="LCS1__Evaluation" entityAttachPath="LCS1__Evaluation.LCS1__Evaluation">
			
                <SentryDefinition>
                    <precondition processDefinitionId="LCS1__CaseIdentification"/>
                </SentryDefinition> 						
			</StageDefinition>

        
            <StageDefinition id="LCS1__Workplan" description="Pla de treball" isMandatory="true" repeatable="ONCE" entityDefinitionId="LCS1__Workplan" entityAttachPath="LCS1__Workplan">			
                <SentryDefinition>
                    <precondition processDefinitionId="LCS1__CaseIdentification"/>
                </SentryDefinition> 		
			</StageDefinition>			

            <StageDefinition id="LCS1__Discharge" description="Alta del pacient" isMandatory="false" repeatable="ONCE" entityDefinitionId="LCS1__Discharge" entityAttachPath="LCS1__Discharge">
			</StageDefinition>			
			-->
		
		</CaseDefinition>
	
	</Workspace>
	
	<Execution> 
		<Action id="CompleteHumanTask" processId="LCS1__SelectPatient">  
			<TaskParam path="LCS1__Settings.Patient" userValue="davidsonj"/> 
			<TaskParam path="LCS1__Settings.CaseManager" userValue="werners"/>   
			<TaskParam path="LCS1__Settings.Clinician" userValue="castrot"/> 
			<TaskParam path="LCS1__Settings.Nurse" userValue="noahs"/>           
			<TaskParam path="LCS1__Settings.SocialCareer" userValue="kuhnl"/>    
		</Action>  
		
		<Action id="CompleteHumanTask" processId="LCS1__TechnologicalTest" breakpoint="true">  
			<TaskParam path="LCS1__Identification.LCS1__TechnologicalTest.tech1" values="['0']"/> 
			<TaskParam path="LCS1__Identification.LCS1__TechnologicalTest.tech2" values="['1']"/> 
			<TaskParam path="LCS1__Identification.LCS1__TechnologicalTest.tech3" values="['1']"/> 
		</Action>  		
	</Execution> 
		
</SACMDefinition>				