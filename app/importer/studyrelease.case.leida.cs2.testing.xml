<SACMDefinition>
    <Group staticId="2c9480885d1737ef015d74deec7f0002" id="IrbllProfessionals"/>
    <Group staticId="c137c88b923911e7bd0c0242ac120002" id="IrbllAdminOfficers"/>
    <Group staticId="c137c886923911e7bd0c0242ac120002" id="IrbllAnesthesiologists"/>
    <Group staticId="c137c87a923911e7bd0c0242ac120002" id="IrbllCaseManagers"/>
    <Group staticId="c137c870923911e7bd0c0242ac120002" id="IrbllClinicians"/>
    <Group staticId="c137c8b9923911e7bd0c0242ac120002" id="IrbllDataManagers"/>
    <Group staticId="c137c8b0923911e7bd0c0242ac120002" id="IrbllLabTechnicians"/>
    <Group staticId="c137c8b4923911e7bd0c0242ac120002" id="IrbllLocalPulmonologists"/>
    <Group staticId="c137c880923911e7bd0c0242ac120002" id="IrbllNurses"/>
    <Group staticId="c137c89d923911e7bd0c0242ac120002" id="IrbllNutritionists"/>
    <Group staticId="c137c88f923911e7bd0c0242ac120002" id="IrbllPhysicians"/>
    <Group staticId="c137c899923911e7bd0c0242ac120002" id="IrbllPhysiotherapists"/>
    <Group staticId="c137c8ab923911e7bd0c0242ac120002" id="IrbllPrimaryCareClinicians"/>
    <Group staticId="c137c8a1923911e7bd0c0242ac120002" id="IrbllPsychologists"/>
    <Group staticId="c137c894923911e7bd0c0242ac120002" id="IrbllRNSTs"/>
    <Group staticId="c137c8a6923911e7bd0c0242ac120002" id="IrbllSocialCareers"/>
    <Group staticId="c137c876923911e7bd0c0242ac120002" id="IrbllAdmins"/>
    <Group staticId="c137c821923911e7bd0c0242ac120002" id="IrbllPatients"/>

    <User staticId="2c940c085e765068015e7652be860010" id="castrot"/>
    <User staticId="2c940c085e765068015e765a27550020" id="foxn"/>
    <User staticId="2c940c085e765068015e76dcc55f00c0" id="davidsonj"/>
    <User staticId="2182a02ab7db11e784180242ac120009" id="noahs"/>
    <User staticId="2c940c085e765068015e76e40dec00d0" id="hartj"/>
    <User staticId="216b6004b7db11e784180242ac120009" id="werners"/>
    <User staticId="2c93808260f91e820161084c2f540025" id="drudisr"/>
    <User staticId="2c93808260f91e8201610849939d001e" id="bigordaa"/>
    <User staticId="21a6d881b7db11e784180242ac120009" id="kuhnl"/>

    <Workspace staticId="2c9480885d1737ef015d74deec7f0002" id="Irbll">
	
		<EntityDefinition id="LCS2__CaseData" description="Case Data">
		  <AttributeDefinition id="LCS2__Identification" type="Link.EntityDefinition.LCS2__Identification"/>  		 		
		  <AttributeDefinition id="LCS2__Settings" type="Link.EntityDefinition.LCS2__Settings" multiplicity="any"/> 		  
		  <AttributeDefinition id="LCS2__WorkplanDueDate" type="date.after(TODAY)" description="Workplan default due date"/>		  
		</EntityDefinition>		
		
		<!-- Settings Entity Definitions -->
        <EntityDefinition id="LCS2__Settings" description="Settings">                       		
		    <AttributeDefinition id="Patient" type="Link.Users(IrbllPatients)" description="Pacient" multiplicity="exactlyOne"/>			
		    <AttributeDefinition id="CaseManager" type="Link.Users(IrbllCaseManagers, IrbllProfessionals)" description="Gestor de casos" multiplicity="exactlyOne"/> 
    	    <AttributeDefinition id="Clinician" type="Link.Users(IrbllClinicians)" description="Metge especialista" multiplicity="exactlyOne"/>
		    <AttributeDefinition id="Nurse" type="Link.Users(IrbllNurses)" description="Infermera" multiplicity="exactlyOne"/>
		    <AttributeDefinition id="SocialCareer" type="Link.Users(IrbllSocialCareers)" description="Treballador social" multiplicity="exactlyOne"/>			
		    <AttributeDefinition id="WorkplanDueDate" type="date.after(TODAY)" description="Workplan default due date" multiplicity="exactlyOne"/>
        </EntityDefinition>			

        <EntityDefinition id="LCS2__Identification" description="Identification">
            <AttributeDefinition id="LCS2__TechnologicalTest" type="Link.EntityDefinition.LCS2__TechnologicalTest" multiplicity="maximalOne" description="Technological test"/> 
        </EntityDefinition>				

		<EntityDefinition id="LCS2__TechnologicalTest" >
			<AttributeDefinition id="tech1" type="enumeration" multiplicity="exactlyOne" description="Vosté o el seu cuidador tenen connexió a Internet?">
				<EnumerationOption value="0" description="No"/>
				<EnumerationOption value="1" description="Sí"/>
			</AttributeDefinition>

			<AttributeDefinition id="tech2" type="enumeration" multiplicity="exactlyOne" description="Vosté fa anar:">
				<EnumerationOption value="1" description="Telèfon mòvil no tan sols per trucar."/>
				<EnumerationOption value="0.0001" description="Tablet"/>
				<EnumerationOption value="0.0002" description="Ordinador personal."/>
				<EnumerationOption value="0" description="Cap"/>
			</AttributeDefinition>

			<AttributeDefinition id="tech3" type="enumeration" multiplicity="exactlyOne" description="El seu cuidador principal fa anar:">
				<EnumerationOption value="1" description="Telèfon mòvil no tan sols per trucar."/>
				<EnumerationOption value="0.0001" description="Tablet"/>
				<EnumerationOption value="0.0002" description="Ordinador personal."/>
				<EnumerationOption value="0" description="Cap"/>
			</AttributeDefinition>
			
			<DerivedAttributeDefinition id="tech4" expression="round(number(tech1,0))+round(number(tech2,0))+round(number(tech3,0))" description="Resultat del test tecnològic"/>
		</EntityDefinition>	  	

		<!--
        <EntityDefinition id="LCS2__Evaluation" description="Case evaluation">
		</EntityDefinition>
		  		
		<EntityDefinition id="LCS2__WorkplanBeforeHospitalization">
		</EntityDefinition>
		
		<EntityDefinition id="LCS2__WorkplanDuringHospitalization">
		</EntityDefinition>
		
		<EntityDefinition id="LCS2__WorkplanAfterHospitalization">				
		</EntityDefinition>

		<EntityDefinition id="LCS2__Discharge">
		</EntityDefinition>
		-->

   <!-- CASE DEFINITION -->				  
        <CaseDefinition id="LCS2__Leida" description="CS2 Lleida - Versió Eurecat" ownerPath="LCS2__Settings.CaseManager" clientPath="LCS2__Settings.Patient" entityDefinitionId="LCS2__CaseData" newEntityDefinitionId="LCS2__Settings" newEntityAttachPath="LCS2__Settings" >	  
				
	    <!-- STAGEDEFINITION: CaseIdentification -->	  
            <StageDefinition id="LCS2__CaseIdentification" description="Identificació del cas" isMandatory="true" repeatable="ONCE" entityDefinitionId="LCS2__Identification" entityAttachPath="LCS2__Identification">
		
                <HumanTaskDefinition id="LCS2__SelectPatient" externalId="SelectPatient" description="Inclusió" ownerPath="LCS2__Settings.CaseManager" isMandatory="true" repeatable="ONCE">
                    <HttpHookDefinition on="COMPLETE" url="http://integration-producer:8081/v1/producer/point-to-point/sacm/case/patient/inclusion" method="POST" failureMessage="Could not COMPLETE SelectPatient on Self-Management System!"/>
                    <TaskParamDefinition path="LCS2__Settings.Patient" isReadOnly="false" isMandatory="true"/>                
                    <TaskParamDefinition path="LCS2__Settings.CaseManager" isReadOnly="false" isMandatory="true"/> 
                    <TaskParamDefinition path="LCS2__Settings.Clinician" isReadOnly="false" isMandatory="true"/>
                    <TaskParamDefinition path="LCS2__Settings.Nurse" isReadOnly="false" isMandatory="true"/>                              
                    <TaskParamDefinition path="LCS2__Settings.SocialCareer" isReadOnly="false" isMandatory="true"/>            
                </HumanTaskDefinition>			

				<HumanTaskDefinition id="LCS2__TechnologicalTest" description="Test d'adherència a la tecnología" ownerPath="LCS2__Settings.CaseManager" isMandatory="true" repeatable="ONCE"  entityDefinitionId="LCS2__TechnologicalTest" entityAttachPath="LCS2__Identification.LCS2__TechnologicalTest">
                    <SentryDefinition>
                        <precondition processDefinitionId="LCS2__SelectPatient"/>
                    </SentryDefinition>
                    <TaskParamDefinition path="LCS2__Identification.LCS2__TechnologicalTest.tech1" isReadOnly="false" isMandatory="true"/>
                    <TaskParamDefinition path="LCS2__Identification.LCS2__TechnologicalTest.tech2" isReadOnly="false" isMandatory="true"/>
                    <TaskParamDefinition path="LCS2__Identification.LCS2__TechnologicalTest.tech3" isReadOnly="false" isMandatory="true"/>
                    <TaskParamDefinition path="LCS2__Identification.LCS2__TechnologicalTest.tech4" isReadOnly="false" isMandatory="true"/>
                </HumanTaskDefinition>		
				
			</StageDefinition>
			
		<!-- 			
            <StageDefinition id="LCS2__CaseEvaluation" description="Avaluació del cas" isMandatory="true" repeatable="ONCE" entityDefinitionId="LCS2__Evaluation" entityAttachPath="LCS2__Evaluation.LCS2__Evaluation">
			
                <SentryDefinition>
                    <precondition processDefinitionId="LCS2__CaseIdentification"/>
                </SentryDefinition> 						
			</StageDefinition>
        
            <StageDefinition id="LCS2__Workplan" description="Pla de treball" isMandatory="true" repeatable="ONCE" entityDefinitionId="LCS2__Workplan" entityAttachPath="LCS2__Workplan">			
                <SentryDefinition>
                    <precondition processDefinitionId="LCS2__CaseIdentification"/>
                </SentryDefinition> 		
			</StageDefinition>			

            <StageDefinition id="LCS2__Discharge" description="Alta del pacient" isMandatory="false" repeatable="ONCE" entityDefinitionId="LCS2__Discharge" entityAttachPath="LCS2__Discharge">
			</StageDefinition>			
			-->
		
		</CaseDefinition>
	
	</Workspace>
	
	<Execution> 
		<Action id="CompleteHumanTask" processId="LCS2__SelectPatient">  
			<TaskParam path="LCS2__Settings.Patient" userValue="davidsonj"/> 
			<TaskParam path="LCS2__Settings.CaseManager" userValue="werners"/>   
			<TaskParam path="LCS2__Settings.Clinician" userValue="castrot"/> 
			<TaskParam path="LCS2__Settings.Nurse" userValue="noahs"/>           
			<TaskParam path="LCS2__Settings.SocialCareer" userValue="kuhnl"/>    
		</Action>  
		
		<Action id="CompleteHumanTask" processId="LCS2__TechnologicalTest" breakpoint="true">  
			<TaskParam path="LCS2__Identification.LCS2__TechnologicalTest.tech1" values="['1']"/> 
			<TaskParam path="LCS2__Identification.LCS2__TechnologicalTest.tech2" values="['1']"/> 
			<TaskParam path="LCS2__Identification.LCS2__TechnologicalTest.tech3" values="['0.0002']"/> 
			<TaskParam path="LCS2__Identification.LCS2__TechnologicalTest.tech4" values="['2']"/> 
		</Action>  		
	</Execution> 
		
</SACMDefinition>				